# План миграции Prisma (Вариант 1: только миграции)

## Цель
Использовать Prisma для декларативного описания схемы и генерации миграций, при этом основной runtime остаётся на Go (`database/sql`).

## Шаги
1. Убедиться, что в `.env` присутствует `DATABASE_URL` (добавлено).
2. Установить Prisma (если нет глобально):
   ```bash
   npm install --save-dev prisma
   npx prisma migrate dev --name init
   ```
3. (Опционально) Просмотр данных:
   ```bash
   npx prisma studio
   ```
4. При изменении схемы:
   - Редактируйте `prisma/schema.prisma`
   - Запускайте: `npx prisma migrate dev --name <change>`

## Согласованность
- Любые ручные изменения SQL должны быть отражены в Prisma schema (избегайте дрейфа).
- Для генерации diff из существующей БД можно использовать: `npx prisma db pull` (обратно подтянет структуру).

## Возможные улучшения далее
- Добавить индексы, отражённые в Prisma через @@index.
- Ввести таблицу audit логов.
- Добавить таблицу для кэширования статусов инстансов (если потребуется).

## Почему не полноценный Prisma client
Go не использует Node runtime напрямую; полноценный клиент потребует сервис‑прослойку (увеличение сложности). Для чисто Go стека позже можно внедрить `sqlc` или `ent`.
